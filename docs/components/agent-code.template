import { Agent, createSigner, createUser, getTestUrl } from "@xmtp/agent-sdk";

// Ephemeral wallet key (auto-generated)
const WALLET_KEY =
  "{{walletKey}}" as const;
const XMTP_ENV = "{{network}}" as const;

const signer = createSigner(createUser(WALLET_KEY));
const agent = await Agent.create(signer, { env: XMTP_ENV, dbPath: null });

agent.on("text", async (ctx) => {
  await ctx.conversation.sendText("Hello from your agent!");
});

agent.on("start", () => {
  console.log("Waiting for messages...");
  console.log(`Message me here: ${getTestUrl(agent.client)}`);
});

await agent.start();
