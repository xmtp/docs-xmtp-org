# Stream conversations and messages


## Stream messages

With the agent-sdk, you can listen for different types of messages using event handlers. The agent automatically handles streaming and provides simple event-based APIs.

```js [Node]
// Listen for text messages
agent.on("text", async (ctx) => {
  console.log("New text message:", ctx.message.content);
  await ctx.conversation.send("Got your message!");
});

// Listen for reactions
agent.on("reaction", async (ctx) => {
  console.log("New reaction:", ctx.message.content);
});

// Listen for replies
agent.on("reply", async (ctx) => {
  console.log("New reply:", ctx.message.content);
});
```

## Stream new group chat and DM conversations

With the agent-sdk, you can listen for new conversations using event handlers. The agent automatically handles streaming and provides simple event-based APIs.

```js [Node]
// Listen for new DM conversations
agent.on("dm", async (ctx) => {
  console.log("New DM conversation:", ctx.conversation.id);
  await ctx.conversation.send("Welcome to our DM!");
});

// Listen for new group conversations
agent.on("group", async (ctx) => {
  console.log("New group conversation:", ctx.conversation.id);
  await ctx.conversation.send("Hello group!");
});
```


## Handle errors and failures

The agent-sdk automatically handles connection failures and reconnections. You can listen for errors using the error handler:

```js [Node]
// Handle uncaught errors
agent.on("unhandledError", (error) => {
  console.error("Agent error:", error);
  // Handle the error appropriately
});

// Log when the agent starts
agent.on("start", () => {
  console.log(`Waiting for messages...`);
  console.log(`Address: ${csx.client.accountIdentifier?.identifier}`);
  console.log(`ðŸ”—${getTestUrl(csx)}`);
});
```
