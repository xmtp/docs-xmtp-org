# Create an XMTP Agent

Create an XMTP agent that can use the signing capabilities provided by a signer. This signer links the agent to the appropriate EOA or SCW.


## Create an agent

### Basic creation

```tsx [Node]
import { Agent, createSigner, createUser } from "@xmtp/agent-sdk";
import { getRandomValues } from "node:crypto";

// Option 1: Create a local user + signer (for testing)
const user = createUser();
const signer = createSigner();

// Option 2: Use your own wallet signer
// const signer: Signer = { /* ... */ };

const agent = await Agent.create(signer, {
  env: "dev", // or 'production'
  dbEncryptionKey: getRandomValues(new Uint8Array(32)),
});
```

### Using environment variables

```tsx [Node]
// Load variables from .env file
process.loadEnvFile(".env");

// Create agent using environment variables
const agent = await Agent.createFromEnv();
```

### Configuration options

```tsx [Node]
import type { ContentCodec } from "@xmtp/content-type-primitives";

type AgentOptions = {
  env?: "local" | "dev" | "production"; // Default: "dev"
  appVersion?: string; // e.g., 'my-agent/1.0'
  dbPath?: string | null | ((inboxId: string) => string);
  dbEncryptionKey?: Uint8Array;
  codecs?: ContentCodec[];
};
```

**Key options:**

- `env`: Network environment (`"dev"`, `"production"`, or `"local"`)
- `dbPath`: Database file path (defaults to current directory)
- `dbEncryptionKey`: Required for secure local storage
- `codecs`: Additional content types support

## Smart Contract Wallets (SCW)

Smart Contract Wallets provide enhanced security and programmability compared to traditional EOA wallets. The XMTP Agent SDK supports SCW integration through various wallet providers including Coinbase Smart Wallet, Safe, and other ERC-4337 compatible wallets.

### Basic SCW Integration

When working with Smart Contract Wallets, you can create an XMTP agent using the wallet's seed or private key:

```tsx [Node]
import { Agent, createSigner, createUser } from "@xmtp/agent-sdk";

const walletData = await initializeWallet("wallet.json");
/* Create the signer using viem and parse the encryption key for the local db */
const user = createUser(walletData.seed as `0x${string}`);
const signer = createSigner(user);

// Create agent with SCW signer
const agent = await Agent.create(signer);

agent.on("text", async (ctx) => {
  await ctx.conversation.send("Hello from SCW agent!");
});

await agent.start();
```

### SCW Benefits

Smart Contract Wallets offer several advantages for XMTP agents:

- **Enhanced Security**: Multi-signature support and customizable authorization
- **Gas Abstraction**: Sponsored transactions and gasless interactions
- **Account Recovery**: Social recovery mechanisms
- **Batch Operations**: Execute multiple transactions atomically
- **Programmable Logic**: Custom validation and execution rules


