# Sync conversations and messages

## ðŸŽ¥ walkthrough: Syncing

This video provides a walkthrough of key concepts required to implement syncing correctly.

<iframe
  width="560"
  height="315"
  src="https://www.youtube.com/embed/jl7P0onApxw?si=YNafIHebx9Kxycos"
  title="YouTube video player"
  frameBorder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
  referrerPolicy="strict-origin-when-cross-origin"
  allowFullScreen
></iframe>

## Sync a specific conversation

Get all new messages and group updates (name, description, etc.) for a specific conversation from the network.

:::code-group

```js [Browser]
await client.conversation.sync();
```

```js [Node]
await client.conversation.sync();
```

```tsx [React Native]
await client.conversation.sync();
```

```kotlin [Kotlin]
client.conversation.sync()
```

```swift [Swift]
try await client.conversation.sync()
```

:::

## Manually request sync from other devices

When a device installation comes online, it automatically sends a request to other devices on the network to sync conversations and messages. However, in scenarios where this automatic process is interrupted, you can manually trigger a sync request.

:::code-group

```js [Browser]
await client.sendSyncRequest();
```

```js [Node]
await client.sendSyncRequest();
```

```tsx [React Native]
await client.sendSyncRequest();
```

```kotlin [Kotlin]
client.sendSyncRequest()
```

```swift [Swift]
try await client.sendSyncRequest()
```

:::

## Sync new conversations

Get any new group chat or DM conversations from the network.

:::code-group

```js [Browser]
await client.conversations.sync();
```

```js [Node]
await client.conversations.sync();
```

```tsx [React Native]
await client.conversations.sync();
```

```kotlin [Kotlin]
client.conversations.sync()
```

```swift [Swift]
try await client.conversations.sync()
```

:::

## Sync new welcomes, conversations with unread messages, and preferences

Use `syncAll` to sync the following from the network:

- New welcomes
- Group chat and DM conversations with a [consent state](/chat-apps/user-consent/user-consent#how-user-consent-preferences-are-set) of allowed or unknown that have unread messages
- [Preference updates](/chat-apps/list-stream-sync/sync-preferences)

We recommend syncing messages for allowed conversations only. This ensures that spammy conversations with a consent state of unknown don't take up networking resources. This also ensures that unwanted spam messages aren't stored in the user's local database.

To sync conversations regardless of consent state, pass `[ALLOWED, UNKNOWN, DENIED]`.

To sync preferences only, you can call [`preferences.sync`](/chat-apps/list-stream-sync/sync-preferences). Note that `preferences.sync` will also sync welcomes to ensure that you have all potential new installations before syncing.

The method returns either a summary object (Browser/Node) or a count (React Native/Kotlin/Swift) indicating sync results.

:::code-group

```js [Browser]
await client.conversations.syncAll(['allowed']);
```

```js [Node]
await client.conversations.syncAll(['allowed']);
```

```tsx [React Native]
// Returns the number of conversations that were synced (v5.5.0+)
const syncedCount = await client.conversations.syncAllConversations([
  'allowed',
]);
console.log(`Synced ${syncedCount} conversations`);
```

```kotlin [Kotlin]
client.conversations.syncAllConversations(consentState = listOf(ConsentState.ALLOWED))
```

```swift [Swift]
try await client.conversations.syncAllConversations(consentState: [.allowed])
```

:::
