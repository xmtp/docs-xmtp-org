import Mermaid from '../../components/Mermaid'

# Calculate XMTP fees

Use this guide to understand XMTP fees and how to calculate your app or agent's estimated XMTP fees.

## Understand XMTP fees

To support a decentralized and sustainable network, XMTP operates on a usage-based fee model. The fees you pay directly compensate the independent node operators who run the infrastructure, ensuring the network remains resilient, secure, and censorship-resistant.

XMTP's architecture consists of two layers:

1.  **The XMTP Network (Offchain):** A globally distributed network of nodes responsible for securely routing and delivering encrypted messages between users. Messaging fees support the operators of these nodes.
2.  **The XMTP Appchain (Onchain):** A specialized blockchain that stores critical metadata, such as user identities, contacts, and group permissions. This onchain layer is essential for decentralized identity and ensuring that only the appropriate users can access conversations. Gas fees are used to pay for transactions on the Appchain.

This two-layer system allows XMTP to provide scalable, decentralized messaging.

### Who pays messaging fees?

Apps and agents pay fees to send messages through XMTP.

To learn how to fund your app to pay fees, see [Fund your app to send messages with XMTP](/fund-apps/fund-your-app).

### What kinds of fees are there?

Each message sent through XMTP can incur these fee types:

- **Messaging fees**: Charged for messages sent through the XMTP Network.
    - **Base fee**: A flat per-message fee.
    - **Storage fee**: A fee charged per-byte-day of storage required. A 100-byte message stored for 30 days would be calculated as 3,000-byte-days.
    - **Congestion fee**: A dynamic fee computed by looking at the recent activity of an originator. Added only during periods of high network activity.
- **Gas fees**: Charged for messages that require transactions on the XMTP Appchain. Typically, these are messages for group membership, identity, and funder-related updates.

The dollar value of the flat per-message base fee, per-byte-day storage fee, and congestion fee are stored in a smart contract and remain constant for a specified period of time. These fees are set and adjusted through protocol governance.

### What counts as a message?

Everything an app or agent sends through the XMTP Network counts toward its message volume:

- App messages (text, reactions, replies)
- Media attachments (charged by size, capped at 1 MB)
- System messages (read receipts, typing indicators)
- Group management (member additions, permission changes)
- Identity updates and consent preferences

To learn more about the message types that clients can publish to XMTP, see [Envelope types](/protocol/envelope-types).

### What happens to collected messaging fees?

Collected messaging fees are paid directly to the node operators who run the globally distributed nodes that power the XMTP Network.

To learn more about node operation, see [Run an XMTP Network node](/network/run-a-node).

### What happens to collected gas fees?

Collected gas fees are paid directly to the XMTP Appchain. Fees are used to maintain the Appchain.

## Estimate XMTP fees

Use these examples to help you estimate fees for your own app or agent.

### Estimate monthly fees

XMTP uses pay-as-you-go pricing that benefits from network scale. For example:

| Monthly active users | Estimated monthly fees | Fees per user |
| --- | --- | --- |
| 10,000 | ~$150/month | $0.015 |
| 100,000 | ~$1,500/month | $0.015 |
| 1 Million | ~$15,000/month | $0.015 |
| 10 Million | ~$150,000/month | $0.015 |

*Based on average usage of 300 messages per user per month*

### Estimate detailed fee breakdowns by message type

| Content type | Typical size | Messages per $1 | Monthly fees (1M messages) |
| --- | --- | --- | --- |
| Text message | 1 KB | 20,000 | $50 |
| Reaction/receipt | 500 bytes | 40,000 | $25 |
| Photo (compressed) | 500 KB | 40 | $25,000 |
| Group update | 2 KB | 10,000 | $100 |

### Estimate your app's specific fees

**Example: Social app with 50,000 monthly active users**

- Users send ~10 messages/day
- 50,000 × 10 × 30 = 15M messages/month
- Include system messages: ~20M total
- **Monthly fees**: $1,000 (at launch rates)

This estimate includes XMTP Appchain gas fees for typical group membership, identity, and funder-related updates.

You can get to the right order of magnitude just using network averages, which is how our calculators work. Avg message size x number of messages per MAU x MAU

## Fee optimization strategies

- **Message batching**: Group notifications save 50-70%
- **Efficient encoding**: Compress before sending
- **Smart caching**: Reduce duplicate fetches
- **Remote attachments**: Link vs. embed for media
- **Selective sync**: Only fetch needed conversations
- **Group optimization**: Minimize membership broadcasts

**Impact on fees**:

| Optimization | Effort | Fee reduction |
| --- | --- | --- |
| Batch notifications | Low | 30-50% |
| Compress messages | Low | 10-20% |
| Remote attachments | Medium | 20-40% |

## Pricing and network scale

The network is designed for per-message fees to decrease as network volume grows, reflecting economies of scale. The current all-inclusive estimate is **$5 per 100,000 messages**.

This estimate is based on typical usage patterns, such as an average message size of 1 KB and 1-2 group operations per 100 messages. Apps with heavy media usage or frequent group operations might see fees vary, but this estimate is accurate for most use cases.

## Understand the payer-to-node operator payment flow

<Mermaid
  id="cursors"
  chart={`
sequenceDiagram
    actor Payer
    participant PayerRegistry
    participant PayerReportManager
    participant DistributionManager
    participant NodeRegistry
    actor NodeOperator

    Payer->>PayerRegistry: 1. Deposits USDC to cover usage
    Note over PayerReportManager: Nodes submit usage reports for settlement.
    PayerReportManager->>PayerRegistry: 2. Calls settleUsage() to deduct fees from a Payer's balance
    PayerRegistry->>DistributionManager: 3. Transfers the collected fees
    NodeOperator->>DistributionManager: 4. Claims their share of the fees
    DistributionManager->>NodeRegistry: 5. Verifies that the claimant is the true owner of the node
    NodeRegistry-->>DistributionManager: Returns the owner's address
    DistributionManager->>NodeOperator: 6. Transfers the earned fees to the node operator
`}
/>