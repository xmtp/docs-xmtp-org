import { Collapsible } from '../../components/Collapsible';

# Run an XMTP network node

<Collapsible title="Want to be a registered XMTP node operator?">

To start, the XMTP Network operates with a limited set of curated node operators to ensure maximum performance and censorship resistance.
The [XMTP Testnet](/network/network-nodes) is powered by registered node operators running [xmtpd](https://github.com/xmtp/xmtpd), XMTP daemon software. xmtpd will also power Mainnet.

To learn more about the decentralized network, see [Decentralizing XMTP](https://xmtp.org/decentralization).

* **Limited slots:** Initial cap of **7 node operators** to ensure low-latency, high-throughput messaging.
* **Mandatory diversity:** Selection is heavily weighted toward operators offering **geographic, geopolitical, and industry diversity** to mitigate collusion and regulatory risk.
* **Infrastructure control:** Preference for those with strong control over infrastructure, ideally **bare metal in censorship-resistant jurisdictions**, over cloud-only solutions.
* **Excellence required:** Proven track record of **technical excellence, 24/7 operations, robust security protocols**, and a high community reputation.
* **Censorship resistance:** Operators must explicitly align with XMTP's core values, prioritizing **censorship resistance and decentralized principles**.

For a complete understanding of the qualification criteria, selection process, and rationale, see [XIP-54: XMTP network node operator qualification criteria](https://github.com/xmtp/XIPs/blob/main/XIPs/xip-54-node-operator-qualifications.md).

If your organization meets these standards, **[apply to operate](https://forms.gle/mJM5ynCAE6xzaUae9)** a registered XMTP network node.

</Collapsible>

## Participate in XMTP Testnet load testing

[XMTP Testnet](/network/network-nodes) is entering the **load testing stage**â€”a critical milestone on the path to Mainnet.

As an existing XMTP Testnet node operator, your participation in this phase will stress-test the network, first by migrating **150M+ real messages** that have been sent on XMTP's v3 network, then introducing tests that simulate real-world traffic conditions.

### What to expect

1. **Testnet load test (now)**: Nodes must upgrade to 1.0.0 and complete the steps below to participate in the initial load test
2. **Additional load tests (January)**: Subsequent tests will approximate more real-world traffic conditions
3. **Mainnet**: Successfully participating in the load test phase is a **prerequisite** to be considered for the initial Mainnet node operator set

## Readiness checklist

As an existing XMTP Testnet node operator, complete the following steps to participate in Testnet load testing and prepare for Mainnet.

1. **Evaluate infrastructure setup**

   Now is the time to consider moving off AWS/Kubernetes to simpler deployment models for Mainnet. For example, see the [Systemd Guide](https://github.com/xmtp/xmtpd-infrastructure/tree/main/systemd).

2. **Upgrade to xmtpd 1.0.0**

   Required for Testnet load testing stage. Mainnet will require a subsequent release.

   To do this, update your deployment to pull the 1.0.0 release from [xmtpd releases](https://github.com/xmtp/xmtpd/releases). Upgrade again when the Mainnet release is available.

3. **Provide a public DNS**

   Nodes must provide a publicly accessible DNS hostname so they can serve **gRPC traffic**, which **requires valid TLS certificates**. A stable domain with proper A/AAAA records is needed for certificate issuance and for other nodes and clients to discover and connect securely.

   To do this, register a domain, configure DNS A/AAAA records pointing to your load balancer or node IP, and ensure proper CORS header forwarding.

4. **Get an Alchemy account + paid tier**

   xmtpd requires reliable blockchain RPC access with sufficient rate limits for Mainnet traffic volumes.

   To do this, [sign up for Alchemy](https://docs.alchemy.com/docs/alchemy-quickstart-guide), select an appropriate paid tier based on your expected request volume, and configure your RPC endpoint URL in your xmtpd config.

5. **Fund wallet with ETH**

   Required to pay gas fees for node registration on the XMTP App Chain (L3) and interact with smart contracts.

   To do this, generate a secure private key, fund it with ETH on the appropriate chain, and store it securely in secrets management. You can use the [Base Sepolia faucet](https://www.alchemy.com/faucets/base-sepolia) to get test ETH. ~$10 of ETH should last months.

   Note that this is the same wallet you'll use to register your node in a subsequent step.

6. **Set up metrics/alerting (Prometheus)**

   Monitor node health, resource usage, and errors. Detect issues proactively.

   To do this, [deploy Prometheus](https://github.com/xmtp/xmtpd-infrastructure/blob/main/doc/k8s-prometheus-monitoring.md) with xmtpd metrics scraping (OpenMetrics format) and set up Grafana dashboards and alerts.

7. **Monitor ETH balance**

   Ensure your wallet never runs out of funds to prevent your node from failing to submit transactions.

   To do this, set up alerting on your wallet balance. This is the wallet you funded in a previous step. You can do this using Prometheus + custom exporter or a third-party service like [Alchemy Notify](https://www.alchemy.com/dapps/alchemy-notify) with thresholds for low balance warnings.

8. **Register the node**

   Register the node on the Nodes smart contract to participate in the Broadcast Network.

   To do this, send the **public key** of the wallet you funded in a previous step to the XMTP team. XMTP will configure the registration for you.

   Here is a script you can use to get the public key:

   ```bash
   docker run ghcr.io/xmtp/xmtpd-cli --private-key <private key> keys get-public-key
   ```

9. **Enable migration**

   XMTP will enable a message migration service that acts as a load test for your node.

   No action required yet. Instructions will be provided at a later date.
